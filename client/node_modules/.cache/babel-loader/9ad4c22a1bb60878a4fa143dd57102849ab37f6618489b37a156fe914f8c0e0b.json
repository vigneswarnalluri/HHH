{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Navigate}from'react-router-dom';import{useAuth}from'../../contexts/AuthContext';import LoadingSpinner from'../common/LoadingSpinner';import{jsx as _jsx}from\"react/jsx-runtime\";const VolunteerPortal=()=>{const{user}=useAuth();const[hasProfile,setHasProfile]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{checkVolunteerProfile();},[user]);const checkVolunteerProfile=async()=>{try{console.log('üîç Checking volunteer profile for user:',user===null||user===void 0?void 0:user.id);const response=await fetch('/api/volunteer/profile',{headers:{'Authorization':`Bearer ${localStorage.getItem('token')}`}});if(response.ok){const data=await response.json();console.log('üìä Profile check result:',data);setHasProfile(!!data.profile);}else{console.log('‚ùå No profile found');setHasProfile(false);}}catch(error){console.error('Error checking volunteer profile:',error);setHasProfile(false);}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}// If volunteer doesn't have a profile, redirect to registration form\nif(!hasProfile){console.log('üîÑ Redirecting to volunteer registration');return/*#__PURE__*/_jsx(Navigate,{to:\"/volunteer/register\",replace:true});}// If volunteer has a profile, redirect to survey dashboard\nconsole.log('üîÑ Redirecting to survey dashboard');return/*#__PURE__*/_jsx(Navigate,{to:\"/volunteer/surveys\",replace:true});};export default VolunteerPortal;","map":{"version":3,"names":["React","useState","useEffect","Navigate","useAuth","LoadingSpinner","jsx","_jsx","VolunteerPortal","user","hasProfile","setHasProfile","loading","setLoading","checkVolunteerProfile","console","log","id","response","fetch","headers","localStorage","getItem","ok","data","json","profile","error","to","replace"],"sources":["C:/Users/vigne/Desktop/HHH/client/src/components/volunteer/VolunteerPortal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport LoadingSpinner from '../common/LoadingSpinner';\r\n\r\nconst VolunteerPortal = () => {\r\n  const { user } = useAuth();\r\n  const [hasProfile, setHasProfile] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    checkVolunteerProfile();\r\n  }, [user]);\r\n\r\n  const checkVolunteerProfile = async () => {\r\n    try {\r\n      console.log('üîç Checking volunteer profile for user:', user?.id);\r\n      const response = await fetch('/api/volunteer/profile', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        console.log('üìä Profile check result:', data);\r\n        setHasProfile(!!data.profile);\r\n      } else {\r\n        console.log('‚ùå No profile found');\r\n        setHasProfile(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error checking volunteer profile:', error);\r\n      setHasProfile(false);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  // If volunteer doesn't have a profile, redirect to registration form\r\n  if (!hasProfile) {\r\n    console.log('üîÑ Redirecting to volunteer registration');\r\n    return <Navigate to=\"/volunteer/register\" replace />;\r\n  }\r\n\r\n  // If volunteer has a profile, redirect to survey dashboard\r\n  console.log('üîÑ Redirecting to survey dashboard');\r\n  return <Navigate to=\"/volunteer/surveys\" replace />;\r\n};\r\n\r\nexport default VolunteerPortal; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,OAAO,KAAQ,4BAA4B,CACpD,MAAO,CAAAC,cAAc,KAAM,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEtD,KAAM,CAAAC,eAAe,CAAGA,CAAA,GAAM,CAC5B,KAAM,CAAEC,IAAK,CAAC,CAAGL,OAAO,CAAC,CAAC,CAC1B,KAAM,CAACM,UAAU,CAAEC,aAAa,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAClD,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAE5CC,SAAS,CAAC,IAAM,CACdY,qBAAqB,CAAC,CAAC,CACzB,CAAC,CAAE,CAACL,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAK,qBAAqB,CAAG,KAAAA,CAAA,GAAY,CACxC,GAAI,CACFC,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAEP,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEQ,EAAE,CAAC,CAChE,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,wBAAwB,CAAE,CACrDC,OAAO,CAAE,CACP,eAAe,CAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,EAC1D,CACF,CAAC,CAAC,CAEF,GAAIJ,QAAQ,CAACK,EAAE,CAAE,CACf,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAN,QAAQ,CAACO,IAAI,CAAC,CAAC,CAClCV,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAEQ,IAAI,CAAC,CAC7Cb,aAAa,CAAC,CAAC,CAACa,IAAI,CAACE,OAAO,CAAC,CAC/B,CAAC,IAAM,CACLX,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CACjCL,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAE,MAAOgB,KAAK,CAAE,CACdZ,OAAO,CAACY,KAAK,CAAC,mCAAmC,CAAEA,KAAK,CAAC,CACzDhB,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,OAAS,CACRE,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,GAAID,OAAO,CAAE,CACX,mBAAOL,IAAA,CAACF,cAAc,GAAE,CAAC,CAC3B,CAEA;AACA,GAAI,CAACK,UAAU,CAAE,CACfK,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAAC,CACvD,mBAAOT,IAAA,CAACJ,QAAQ,EAACyB,EAAE,CAAC,qBAAqB,CAACC,OAAO,MAAE,CAAC,CACtD,CAEA;AACAd,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC,CACjD,mBAAOT,IAAA,CAACJ,QAAQ,EAACyB,EAAE,CAAC,oBAAoB,CAACC,OAAO,MAAE,CAAC,CACrD,CAAC,CAED,cAAe,CAAArB,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
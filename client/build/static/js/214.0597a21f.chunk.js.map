{"version":3,"file":"static/js/214.0597a21f.chunk.js","mappings":"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","sources":["components/volunteer/SurveyDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { FiMapPin, FiUser, FiCalendar, FiPlus, FiEye, FiEdit, FiTrash2 } from 'react-icons/fi';\r\n\r\nconst SurveyDashboard = () => {\r\n  const { user } = useAuth();\r\n  const [surveys, setSurveys] = useState([]);\r\n  const [surveyCount, setSurveyCount] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [selectedSurvey, setSelectedSurvey] = useState(null);\r\n  const [showSurveyModal, setShowSurveyModal] = useState(false);\r\n\r\n  console.log('🔍 Current user:', user);\r\n  console.log('🔍 User ID:', user?.id);\r\n\r\n  useEffect(() => {\r\n    fetchSurveys();\r\n  }, []);\r\n\r\n  const fetchSurveys = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('token');\r\n      console.log('🔍 Fetching surveys with token:', token ? 'exists' : 'missing');\r\n      \r\n      const response = await fetch('/api/volunteer/surveys', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      console.log('🔍 Response status:', response.status);\r\n      console.log('🔍 Response ok:', response.ok);\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        console.log('🔍 Error response:', errorText);\r\n        throw new Error('Failed to fetch surveys');\r\n      }\r\n\r\n      const data = await response.json();\r\n      console.log('🔍 Response data:', data);\r\n      console.log('🔍 Surveys count:', data.surveys?.length || 0);\r\n      console.log('🔍 Survey count from server:', data.surveyCount || 0);\r\n      \r\n      setSurveys(data.surveys || []);\r\n      setSurveyCount(data.surveyCount || 0);\r\n    } catch (error) {\r\n      console.error('Error fetching surveys:', error);\r\n      setError('Failed to load surveys');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteSurvey = async (surveyId) => {\r\n    if (!window.confirm('Are you sure you want to delete this survey?')) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`/api/volunteer/surveys/${surveyId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to delete survey');\r\n      }\r\n\r\n      // Remove the survey from the list\r\n      setSurveys(surveys.filter(survey => survey.id !== surveyId));\r\n      setSurveyCount(prev => prev - 1);\r\n    } catch (error) {\r\n      console.error('Error deleting survey:', error);\r\n      alert('Failed to delete survey');\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString).toLocaleDateString('en-IN', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const parseCoordinates = (coordString) => {\r\n    if (!coordString) return null;\r\n    const match = coordString.match(/\\(([^,]+),([^)]+)\\)/);\r\n    if (match) {\r\n      return [parseFloat(match[1]), parseFloat(match[2])];\r\n    }\r\n    return null;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-12 h-12 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600\">Loading surveys...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Header */}\r\n      <div className=\"bg-white shadow-sm border-b\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex justify-between items-center py-4\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">\r\n                Survey Dashboard\r\n              </h1>\r\n              <p className=\"text-sm text-gray-600\">\r\n                Welcome, {user?.email}\r\n              </p>\r\n            </div>\r\n            <button\r\n              onClick={() => window.location.href = '/volunteer/survey/new'}\r\n              className=\"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 flex items-center gap-2\"\r\n            >\r\n              <FiPlus className=\"w-4 h-4\" />\r\n              New Survey\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {/* Stats Cards */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <div className=\"flex items-center\">\r\n              <div className=\"p-3 rounded-full bg-blue-100 text-blue-600\">\r\n                <FiUser className=\"w-6 h-6\" />\r\n              </div>\r\n              <div className=\"ml-4\">\r\n                <p className=\"text-sm font-medium text-gray-600\">Total Surveys</p>\r\n                <p className=\"text-2xl font-bold text-gray-900\">{surveyCount}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <div className=\"flex items-center\">\r\n              <div className=\"p-3 rounded-full bg-green-100 text-green-600\">\r\n                <FiMapPin className=\"w-6 h-6\" />\r\n              </div>\r\n              <div className=\"ml-4\">\r\n                <p className=\"text-sm font-medium text-gray-600\">This Month</p>\r\n                <p className=\"text-2xl font-bold text-gray-900\">\r\n                  {surveys.filter(s => {\r\n                    const surveyDate = new Date(s.survey_date);\r\n                    const now = new Date();\r\n                    return surveyDate.getMonth() === now.getMonth() && \r\n                           surveyDate.getFullYear() === now.getFullYear();\r\n                  }).length}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <div className=\"flex items-center\">\r\n              <div className=\"p-3 rounded-full bg-purple-100 text-purple-600\">\r\n                <FiCalendar className=\"w-6 h-6\" />\r\n              </div>\r\n              <div className=\"ml-4\">\r\n                <p className=\"text-sm font-medium text-gray-600\">This Week</p>\r\n                <p className=\"text-2xl font-bold text-gray-900\">\r\n                  {surveys.filter(s => {\r\n                    const surveyDate = new Date(s.survey_date);\r\n                    const now = new Date();\r\n                    const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\r\n                    return surveyDate >= weekAgo;\r\n                  }).length}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Surveys List */}\r\n        <div className=\"bg-white rounded-lg shadow\">\r\n          <div className=\"px-6 py-4 border-b border-gray-200\">\r\n            <h2 className=\"text-lg font-medium text-gray-900\">Recent Surveys</h2>\r\n          </div>\r\n          \r\n          {error && (\r\n            <div className=\"p-6\">\r\n              <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\r\n                <p className=\"text-red-800\">{error}</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {surveys.length === 0 ? (\r\n            <div className=\"p-6 text-center\">\r\n              <FiUser className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No surveys yet</h3>\r\n              <p className=\"text-gray-600 mb-4\">Start by creating your first survey</p>\r\n              <button\r\n                onClick={() => window.location.href = '/volunteer/survey/new'}\r\n                className=\"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700\"\r\n              >\r\n                Create Survey\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Beggar Details\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Location\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Date\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Actions\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {surveys.map((survey) => (\r\n                    <tr key={survey.id} className=\"hover:bg-gray-50\">\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"flex items-center\">\r\n                          {survey.beggar_photo_url && (\r\n                            <img\r\n                              src={survey.beggar_photo_url}\r\n                              alt=\"Beggar\"\r\n                              className=\"w-10 h-10 rounded-full object-cover mr-3\"\r\n                            />\r\n                          )}\r\n                          <div>\r\n                            <div className=\"text-sm font-medium text-gray-900\">\r\n                              {survey.beggar_name || 'Unknown'}\r\n                            </div>\r\n                            <div className=\"text-sm text-gray-500\">\r\n                              {survey.beggar_age && `${survey.beggar_age} years`}\r\n                              {survey.beggar_gender && ` • ${survey.beggar_gender}`}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"text-sm text-gray-900\">\r\n                          {survey.location_address || 'Location recorded'}\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-500\">\r\n                          {(() => {\r\n                            const coords = parseCoordinates(survey.location_coordinates);\r\n                            return coords ? `${coords[0].toFixed(4)}, ${coords[1].toFixed(4)}` : 'Coordinates available';\r\n                          })()}\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                        {formatDate(survey.survey_date)}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                        <div className=\"flex space-x-2\">\r\n                          <button\r\n                            onClick={() => {\r\n                              setSelectedSurvey(survey);\r\n                              setShowSurveyModal(true);\r\n                            }}\r\n                            className=\"text-blue-600 hover:text-blue-900\"\r\n                          >\r\n                            <FiEye className=\"w-4 h-4\" />\r\n                          </button>\r\n                          <button\r\n                            onClick={() => window.location.href = `/volunteer/survey/edit/${survey.id}`}\r\n                            className=\"text-green-600 hover:text-green-900\"\r\n                          >\r\n                            <FiEdit className=\"w-4 h-4\" />\r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleDeleteSurvey(survey.id)}\r\n                            className=\"text-red-600 hover:text-red-900\"\r\n                          >\r\n                            <FiTrash2 className=\"w-4 h-4\" />\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Survey Detail Modal */}\r\n      {showSurveyModal && selectedSurvey && (\r\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\r\n          <div className=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\r\n            <div className=\"mt-3\">\r\n              <div className=\"flex justify-between items-center mb-4\">\r\n                <h3 className=\"text-lg font-medium text-gray-900\">Survey Details</h3>\r\n                <button\r\n                  onClick={() => setShowSurveyModal(false)}\r\n                  className=\"text-gray-400 hover:text-gray-600\"\r\n                >\r\n                  ×\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"space-y-4\">\r\n                {selectedSurvey.beggar_photo_url && (\r\n                  <div>\r\n                    <img\r\n                      src={selectedSurvey.beggar_photo_url}\r\n                      alt=\"Beggar\"\r\n                      className=\"w-full h-48 object-cover rounded-lg\"\r\n                    />\r\n                  </div>\r\n                )}\r\n                \r\n                <div>\r\n                  <h4 className=\"font-medium text-gray-900\">Beggar Information</h4>\r\n                  <p className=\"text-sm text-gray-600\">\r\n                    Name: {selectedSurvey.beggar_name || 'Unknown'}<br/>\r\n                    Age: {selectedSurvey.beggar_age || 'Unknown'}<br/>\r\n                    Gender: {selectedSurvey.beggar_gender || 'Unknown'}\r\n                  </p>\r\n                </div>\r\n\r\n                <div>\r\n                  <h4 className=\"font-medium text-gray-900\">Location</h4>\r\n                  <p className=\"text-sm text-gray-600\">\r\n                    {selectedSurvey.location_address || 'Address not provided'}<br/>\r\n                    {(() => {\r\n                      const coords = parseCoordinates(selectedSurvey.location_coordinates);\r\n                      return coords ? `Coordinates: ${coords[0].toFixed(6)}, ${coords[1].toFixed(6)}` : 'Coordinates not available';\r\n                    })()}\r\n                  </p>\r\n                </div>\r\n\r\n                {selectedSurvey.survey_notes && (\r\n                  <div>\r\n                    <h4 className=\"font-medium text-gray-900\">Notes</h4>\r\n                    <p className=\"text-sm text-gray-600\">{selectedSurvey.survey_notes}</p>\r\n                  </div>\r\n                )}\r\n\r\n                <div>\r\n                  <h4 className=\"font-medium text-gray-900\">Survey Date</h4>\r\n                  <p className=\"text-sm text-gray-600\">{formatDate(selectedSurvey.survey_date)}</p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"mt-6 flex justify-end space-x-3\">\r\n                <button\r\n                  onClick={() => setShowSurveyModal(false)}\r\n                  className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200\"\r\n                >\r\n                  Close\r\n                </button>\r\n                <button\r\n                  onClick={() => {\r\n                    setShowSurveyModal(false);\r\n                    window.location.href = `/volunteer/survey/edit/${selectedSurvey.id}`;\r\n                  }}\r\n                  className=\"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700\"\r\n                >\r\n                  Edit\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SurveyDashboard; "],"names":["SurveyDashboard","user","useAuth","surveys","setSurveys","useState","surveyCount","setSurveyCount","loading","setLoading","error","setError","selectedSurvey","setSelectedSurvey","showSurveyModal","setShowSurveyModal","console","log","id","useEffect","fetchSurveys","async","_data$surveys","token","localStorage","getItem","response","fetch","headers","status","ok","errorText","text","Error","data","json","length","formatDate","dateString","Date","toLocaleDateString","year","month","day","hour","minute","parseCoordinates","coordString","match","parseFloat","_jsx","className","children","_jsxs","email","onClick","window","location","href","FiPlus","FiUser","FiMapPin","filter","s","surveyDate","survey_date","now","getMonth","getFullYear","FiCalendar","getTime","map","survey","beggar_photo_url","src","alt","beggar_name","beggar_age","beggar_gender","location_address","coords","location_coordinates","toFixed","FiEye","FiEdit","confirm","surveyId","method","prev","alert","handleDeleteSurvey","FiTrash2","survey_notes"],"sourceRoot":""}
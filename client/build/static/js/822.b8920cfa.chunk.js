"use strict";(self.webpackChunkvolunteer_management_client=self.webpackChunkvolunteer_management_client||[]).push([[822],{3822:(e,a,s)=>{s.r(a),s.d(a,{default:()=>n});var r=s(5043),t=(s(5016),s(8254)),o=s(579);const n=()=>{const[e,a]=(0,r.useState)(1),[s,n]=(0,r.useState)({beggar_name:"",beggar_age:"",beggar_gender:"",beggar_photo:null,location_coordinates:null,location_address:"",survey_notes:""}),[l,i]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null),g=[{id:1,title:"Beggar Details",icon:t.JXP},{id:2,title:"Location",icon:t.HzC},{id:3,title:"Photo & Notes",icon:t.PoE},{id:4,title:"Review & Submit",icon:t.A3x}],m=(e,a)=>{n(s=>({...s,[e]:a}))},x=()=>{e<g.length&&a(e+1)},u=()=>{e>1&&a(e-1)},h=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{const{latitude:a,longitude:s}=e.coords;m("location_coordinates",[a,s])},e=>{console.error("Error getting location:",e),alert("Unable to get your location. Please enter coordinates manually.")}):alert("Geolocation is not supported by this browser.")},b=e=>{const a=e.target.files[0];if(a){const e=new FileReader;e.onload=e=>{m("beggar_photo",e.target.result)},e.readAsDataURL(a)}},p=async()=>{try{i(!0),c(null);const e={beggar_name:s.beggar_name||void 0,beggar_age:s.beggar_age?parseInt(s.beggar_age):void 0,beggar_gender:s.beggar_gender||void 0,beggar_photo_url:s.beggar_photo||void 0,location_coordinates:s.location_coordinates,location_address:s.location_address||void 0,survey_notes:s.survey_notes||void 0},a=localStorage.getItem("token");console.log("\ud83d\udd0d Debug: Token exists:",!!a),console.log("\ud83d\udd0d Debug: Survey data:",e);const r=await fetch("/api/volunteer/surveys",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(e)});if(console.log("\ud83d\udd0d Debug: Response status:",r.status),console.log("\ud83d\udd0d Debug: Response ok:",r.ok),!r.ok){const e=await r.json();throw console.log("\ud83d\udd0d Debug: Error data:",e),new Error(e.error||"Failed to create survey")}const t=await r.json();console.log("\ud83d\udd0d Debug: Success result:",t),alert("Survey created successfully!"),window.location.href="/volunteer/surveys"}catch(d){console.error("Error creating survey:",d),c(d.message)}finally{i(!1)}};return(0,o.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,o.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,o.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,o.jsx)("div",{className:"flex justify-between items-center py-4",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("button",{onClick:()=>window.location.href="/volunteer/surveys",className:"mr-4 text-gray-600 hover:text-gray-900",children:(0,o.jsx)(t.kRp,{className:"w-5 h-5"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"New Survey"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Create a new survey for a beggar"})]})]})})})}),(0,o.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,o.jsx)("div",{className:"mb-8",children:(0,o.jsx)("div",{className:"flex items-center justify-between",children:g.map((a,s)=>{const r=a.icon,n=e===a.id,l=e>a.id;return(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2 "+(n?"border-primary-600 bg-primary-600 text-white":l?"border-green-600 bg-green-600 text-white":"border-gray-300 bg-white text-gray-400"),children:l?(0,o.jsx)(t.A3x,{className:"w-5 h-5"}):(0,o.jsx)(r,{className:"w-5 h-5"})}),(0,o.jsx)("div",{className:"ml-3",children:(0,o.jsx)("p",{className:"text-sm font-medium "+(n?"text-primary-600":l?"text-green-600":"text-gray-500"),children:a.title})}),s<g.length-1&&(0,o.jsx)("div",{className:"flex-1 h-0.5 mx-4 "+(l?"bg-green-600":"bg-gray-300")})]},a.id)})})}),(0,o.jsx)("div",{className:"card",children:(()=>{switch(e){case 1:return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Beggar Information"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name (if known)"}),(0,o.jsx)("input",{type:"text",value:s.beggar_name,onChange:e=>m("beggar_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter name if known"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Age (if known)"}),(0,o.jsx)("input",{type:"number",value:s.beggar_age,onChange:e=>m("beggar_age",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter age",min:"0",max:"120"})]})]}),(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),(0,o.jsxs)("select",{value:s.beggar_gender,onChange:e=>m("beggar_gender",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,o.jsx)("option",{value:"",children:"Select gender"}),(0,o.jsx)("option",{value:"male",children:"Male"}),(0,o.jsx)("option",{value:"female",children:"Female"}),(0,o.jsx)("option",{value:"other",children:"Other"}),(0,o.jsx)("option",{value:"unknown",children:"Unknown"})]})]})]}),(0,o.jsx)("div",{className:"flex justify-end",children:(0,o.jsx)("button",{onClick:x,className:"bg-primary-600 text-white px-6 py-2 rounded-md hover:bg-primary-700",children:"Next"})})]});case 2:return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Location Information"}),(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsx)("button",{type:"button",onClick:h,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 mb-4",children:"Get Current Location"})}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Latitude"}),(0,o.jsx)("input",{type:"number",step:"any",value:s.location_coordinates?s.location_coordinates[0]:"",onChange:e=>{const a=parseFloat(e.target.value),r=s.location_coordinates?s.location_coordinates[1]:null;m("location_coordinates",null!==r?[a,r]:null)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter latitude"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Longitude"}),(0,o.jsx)("input",{type:"number",step:"any",value:s.location_coordinates?s.location_coordinates[1]:"",onChange:e=>{const a=parseFloat(e.target.value),r=s.location_coordinates?s.location_coordinates[0]:null;m("location_coordinates",null!==r?[r,a]:null)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter longitude"})]})]}),(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address (optional)"}),(0,o.jsx)("textarea",{value:s.location_address,onChange:e=>m("location_address",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Enter address or landmark"})]})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("button",{onClick:u,className:"bg-gray-300 text-gray-700 px-6 py-2 rounded-md hover:bg-gray-400",children:"Previous"}),(0,o.jsx)("button",{onClick:x,disabled:!s.location_coordinates,className:"bg-primary-600 text-white px-6 py-2 rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]});case 3:return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Photo & Additional Notes"}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photo (optional)"}),(0,o.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,o.jsx)("input",{type:"file",accept:"image/*",onChange:b,className:"hidden",id:"photo-upload"}),(0,o.jsx)("label",{htmlFor:"photo-upload",className:"cursor-pointer",children:s.beggar_photo?(0,o.jsxs)("div",{children:[(0,o.jsx)("img",{src:s.beggar_photo,alt:"Uploaded photo",className:"w-32 h-32 object-cover rounded-lg mx-auto mb-2"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Click to change photo"})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)(t.PoE,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Click to upload photo"})]})})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes (optional)"}),(0,o.jsx)("textarea",{value:s.survey_notes,onChange:e=>m("survey_notes",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"4",placeholder:"Enter any additional observations or notes..."})]})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("button",{onClick:u,className:"bg-gray-300 text-gray-700 px-6 py-2 rounded-md hover:bg-gray-400",children:"Previous"}),(0,o.jsx)("button",{onClick:x,className:"bg-primary-600 text-white px-6 py-2 rounded-md hover:bg-primary-700",children:"Next"})]})]});case 4:return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Review & Submit"}),(0,o.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-medium text-gray-900",children:"Beggar Information"}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:["Name: ",s.beggar_name||"Not provided",(0,o.jsx)("br",{}),"Age: ",s.beggar_age||"Not provided",(0,o.jsx)("br",{}),"Gender: ",s.beggar_gender||"Not provided"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-medium text-gray-900",children:"Location"}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:["Coordinates: ",s.location_coordinates?`${s.location_coordinates[0].toFixed(6)}, ${s.location_coordinates[1].toFixed(6)}`:"Not provided",(0,o.jsx)("br",{}),"Address: ",s.location_address||"Not provided"]})]}),s.beggar_photo&&(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-medium text-gray-900",children:"Photo"}),(0,o.jsx)("img",{src:s.beggar_photo,alt:"Beggar photo",className:"w-32 h-32 object-cover rounded-lg"})]}),s.survey_notes&&(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-medium text-gray-900",children:"Notes"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:s.survey_notes})]})]})]}),d&&(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,o.jsx)("p",{className:"text-red-800",children:d})}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("button",{onClick:u,className:"bg-gray-300 text-gray-700 px-6 py-2 rounded-md hover:bg-gray-400",children:"Previous"}),(0,o.jsx)("button",{onClick:p,disabled:l||!s.location_coordinates,className:"bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Submitting...":"Submit Survey"})]})]});default:return null}})()})]})]})}}}]);
//# sourceMappingURL=822.b8920cfa.chunk.js.map